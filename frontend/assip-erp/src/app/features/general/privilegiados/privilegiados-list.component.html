<div class="card">
  <!-- Cabecera (título + acciones a la derecha) -->
  <div class="card-header">
    <h2>Privilegiados</h2>
    <div class="actions">
      <a class="btn--new" [routerLink]="['/general/privilegiados/new']">Nuevo</a>
      <button class="btn--print" (click)="imprimir()" [disabled]="loading()">Imprimir</button>
    </div>
  </div>

  <div class="card-body">
    <!-- Toolbar (filtro + buscar) -->
    <div class="toolbar">
      <input
        [ngModel]="q()"
        (ngModelChange)="q.set($event)"
        [ngModelOptions]="{ standalone: true }"
        type="text"
        placeholder="Buscar por documento o nombre…"
        (keyup.enter)="buscar()"
      />
      <button class="btn" (click)="buscar()" [disabled]="loading()">Buscar</button>
    </div>

    <table class="table">
      <thead>
      <tr>
        <th style="width:130px;">Documento</th>
        <th>Nombre</th>
        <th style="width:160px;">Parentesco</th>
        <th style="width:120px;" class="th-acciones">Acciones</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngIf="loading()">
        <td colspan="4" class="empty">Cargando…</td>
      </tr>
      <tr *ngIf="!loading() && !data().length && !error()">
        <td colspan="4" class="empty">No hay datos</td>
      </tr>
      <tr *ngIf="error()">
        <td colspan="4" class="empty">{{ error() }}</td>
      </tr>

      <tr *ngFor="let r of data()">
        <td>{{ r.documento }}</td>
        <td>{{ r.nombrePersona }}</td>
        <td>
          {{ r.codigoParentesco }}
          <ng-container *ngIf="nomParentesco(r.codigoParentesco) as np">
            — {{ np }}
          </ng-container>
        </td>
        <td class="acciones">
          <button class="btn sm success" (click)="editar(r.idPrivilegiado)">Editar</button>
          <button class="btn sm danger" (click)="eliminar(r.idPrivilegiado)" [disabled]="loading()">Eliminar</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
