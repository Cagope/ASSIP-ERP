<div class="card">
  <div class="card-header">
    <h2>Par치metros</h2>
    <div class="actions">
      <a class="btn--new" [routerLink]="['/general/parametros/new']">Nuevo</a>
      <button class="btn--print" (click)="imprimir()">Imprimir</button>
    </div>
  </div>

  <div class="card-body">
    <div class="toolbar">
      <select [(ngModel)]="idAgenciaFilter">
        <option [ngValue]="null">-- Todas las agencias --</option>
        <option *ngFor="let a of agencias()" [ngValue]="a.idAgencia">
          {{ a.nombreAgencia }} ({{ a.siglaAgencia || a.codigoAgencia }})
        </option>
      </select>

      <input
        [ngModel]="q()"
        (ngModelChange)="q.set($event)"
        type="text"
        placeholder="Buscar por nombre..."
      />

      <input
        [ngModel]="codigo()"
        (ngModelChange)="codigo.set($event ? +$event : null)"
        type="number"
        min="0"
        placeholder="C칩digo"
        class="codigo"
      />

      <button class="btn" (click)="buscar()" [disabled]="loading()">Buscar</button>
    </div>

    <table class="table">
      <colgroup>
        <col style="width: 220px;"> <!-- Agencia -->
        <col style="width: 110px;"> <!-- C칩digo -->
        <col>                       <!-- Nombre -->
        <col style="width: 130px;"> <!-- Valor -->
        <col style="width: 140px;"> <!-- Tipo -->
        <col style="width: 160px;"> <!-- Acciones -->
      </colgroup>
      <thead>
      <tr>
        <th>Agencia</th>
        <th>C칩digo</th>
        <th>Nombre</th>
        <th>Valor</th>
        <th>Tipo</th>
        <th class="th-acciones">Acciones</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let p of parametros()">
        <td>{{ p.nombreAgencia }}</td>
        <td class="num">{{ p.codigoParametro }}</td>
        <td>{{ p.nombreParametro }}</td>
        <td class="num">{{ p.valorParametro | number:'1.2-2' }}</td>
        <td>{{ p.tipoValor ? 'Valor' : 'Porcentaje' }}</td>
        <td class="acciones">
          <button class="btn sm success" (click)="editar(p.idParametro)">Editar</button>
          <button class="btn sm danger" (click)="eliminar(p.idParametro)" [disabled]="loading()">Eliminar</button>
        </td>
      </tr>
      <tr *ngIf="!parametros().length && !loading()">
        <td colspan="6" class="empty">Sin resultados</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
