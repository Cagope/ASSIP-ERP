<div class="card">
  <div class="card-header">
    <h2>{{ id() ? 'Editar sub zona' : 'Nueva sub zona' }}</h2>
    <a class="btn" [routerLink]="['/general/sub-zonas']">Regresar</a>
  </div>

  <div class="card-body">
    <div class="alert error" *ngIf="errorMsg()">{{ errorMsg() }}</div>

    <form [formGroup]="form" (ngSubmit)="guardar()">
      <div class="grid">

        <!-- Zona -->
        <div class="field">
          <label for="idZona">Zona *</label>
          <select id="idZona" formControlName="idZona">
            <option [ngValue]="null">-- Seleccione --</option>
            <option *ngFor="let z of zonas()" [ngValue]="z.idZona">
              {{ z.nombreZona }} ({{ z.codigoZona }})
            </option>
          </select>
          <small class="error" *ngIf="form.controls.idZona.touched && form.controls.idZona.invalid">
            Seleccione una zona.
          </small>
        </div>

        <!-- Código (3 dígitos) -->
        <div class="field">
          <label for="codigoSubZona">Código (3 dígitos) *</label>
          <input
            id="codigoSubZona"
            type="text"
            maxlength="3"
            inputmode="numeric"
            pattern="\d{3}"
            placeholder="Ej: 001"
            formControlName="codigoSubZona"
            (keypress)="onlyDigits($event)"
          />
          <small class="error" *ngIf="form.controls.codigoSubZona.touched && form.controls.codigoSubZona.invalid">
            <span *ngIf="form.controls.codigoSubZona.hasError('required')">Requerido.</span>
            <span *ngIf="form.controls.codigoSubZona.hasError('pattern')">Exactamente 3 dígitos.</span>
          </small>
        </div>

        <!-- Nombre -->
        <div class="field">
          <label for="nombreSubZona">Nombre *</label>
          <input id="nombreSubZona" type="text" formControlName="nombreSubZona" placeholder="Nombre de la sub zona" />
          <small class="error" *ngIf="form.controls.nombreSubZona.touched && form.controls.nombreSubZona.invalid">
            <span *ngIf="form.controls.nombreSubZona.hasError('required')">Requerido.</span>
            <span *ngIf="form.controls.nombreSubZona.hasError('maxlength')">Máximo 100 caracteres.</span>
          </small>
        </div>

        <!-- Comentario -->
        <div class="field">
          <label for="comentarioSubZona">Comentario *</label>
          <input id="comentarioSubZona" type="text" formControlName="comentarioSubZona" placeholder="Comentario" />
          <small class="error" *ngIf="form.controls.comentarioSubZona.touched && form.controls.comentarioSubZona.invalid">
            <span *ngIf="form.controls.comentarioSubZona.hasError('required')">Requerido.</span>
            <span *ngIf="form.controls.comentarioSubZona.hasError('maxlength')">Máximo 100 caracteres.</span>
          </small>
        </div>
      </div>

      <div class="actions">
        <button type="submit" class="btn primary" [disabled]="guardando()">Guardar</button>
        <button type="button" class="btn ghost" (click)="cancelar()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
